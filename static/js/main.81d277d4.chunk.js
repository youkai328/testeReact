(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),c=a.n(r),i=(a(92),a(18)),s=a(21),l=a(22),u=a(26),m=a(24),d=a(27),v=(a(93),a(94),a(44)),h=function(e){return o.a.createElement(v.b,Object.assign({activeStyle:{fontWeight:"bold"}},e))},E=function(){return o.a.createElement("nav",null,o.a.createElement("div",{className:"nav-wrapper indigo lighten-2"},o.a.createElement(h,{to:"/",className:"brand-logo",activeStyle:{}},"Casa do C\xf3digo"),o.a.createElement("ul",{className:"right"},o.a.createElement("li",null,o.a.createElement(h,{to:"/autores"},"Autores")),o.a.createElement("li",null,o.a.createElement(h,{to:"/livros"},"Livros")),o.a.createElement("li",null,o.a.createElement(h,{to:"/sobre"},"Sobre")))))},p=a(208),f=a(211),g=a(204),b=a(209),j=a(210),O=a(207),y=function(e){var t=e.campos,a=e.dados,n=e.removeDado,r=function(e){var t=e.removeDado,a=e.id;return t?o.a.createElement(g.a,null,o.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){t(a)}},"Remover")):null};return o.a.createElement(p.a,null,o.a.createElement(b.a,null,o.a.createElement(j.a,null,t.map(function(e,t){return o.a.createElement(g.a,{key:t},e.titulo)}),o.a.createElement(function(){return n?o.a.createElement(g.a,null,"Remover"):null},{removeDado:n}))),o.a.createElement(f.a,null,a.map(function(e,a){return o.a.createElement(j.a,{key:e.id},t.map(function(t,a){return o.a.createElement(g.a,{key:a},e[t.dado])}),o.a.createElement(r,{id:e.id,removeDado:n}))})))},A=a(50),S=a(217),k=a(213),x=a(221),C=a(218),I=function(e){var t=e.open,a=e.handleClose,n=e.children,r=e.severity;return o.a.createElement(x.a,{open:t,onClose:a,autoHideDuration:2e3,auto:!0},o.a.createElement(C.a,{onClose:a,variant:"filled",severity:r},n))},D=a(76),L=a(77),w=a.n(L),M=function(){function e(t){Object(s.a)(this,e),this.validacoes=t}return Object(l.a)(e,[{key:"valida",value:function(e){var t=this.valido();return this.validacoes.forEach(function(a){if(!t[a.campo].isInvalid){var n=e[a.campo.toString()],o=a.agrs||[];("string"===typeof a.metodo?w.a[a.metodo]:a.metodo).apply(void 0,[n].concat(Object(i.a)(o),[e]))!==a.validoQuando&&(t[a.campo]={isInvalid:!0,mensagem:a.mensagem},t.isValid=!1)}}),t}},{key:"valido",value:function(){var e={};return this.validacoes.map(function(t){return e[t.campo]={isInvalid:!1,mensagem:""}}),Object(D.a)({isValid:!0},e)}}]),e}(),N=a(59),P=a.n(N),F={exibeMensagem:function(e,t){"success"===e&&P.a.toast({html:t,classes:"green",displayLength:2e3}),"error"===e&&P.a.toast({html:t,classes:"red",displayLength:2e3})}},T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).escutadorDeInput=function(e){var t=e.target,n=t.name,o=t.value;a.setState(Object(A.a)({},n,o))},a.submitFormulario=function(){var e=a.validador.valida(a.state);if(e.isValid)a.props.escutadorDeSubmit(a.state),a.setState(a.stateInicial);else{var t=[e.nome,e.livro,e.preco].filter(function(e){return e.isInvalid}).reduce(function(e,t){return e+t.mensagem+". "},"");console.log(t),a.setState({mensagem:{open:!0,severity:"error",texto:t}})}},a.validador=new M([{campo:"nome",metodo:"isEmpty",validoQuando:!1,mensagem:"Entre com um nome"},{campo:"livro",metodo:"isEmpty",validoQuando:!1,mensagem:"Entre com um livro"},{campo:"preco",metodo:"isInt",args:[{min:0,max:99999}],validoQuando:!0,mensagem:"Entre com um valor num\xe9rico"}]),a.stateInicial={nome:"",livro:"",preco:"",validacao:a.validador.valido(),mensagem:{open:!1,texto:"",severity:"success"}},a.state=a.stateInicial,a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.nome,n=t.livro,r=t.preco;return o.a.createElement(o.a.Fragment,null,o.a.createElement(I,{open:this.state.mensagem.open,handleClose:function(){return e.setState({mensagem:{open:!1}})},severity:this.state.mensagem.severity},this.state.mensagem.texto),o.a.createElement("form",null,o.a.createElement(k.a,{container:!0,alignItems:"center",spacing:2},o.a.createElement(k.a,{item:!0},o.a.createElement(S.a,{id:"nome",label:"Nome",variant:"outlined",name:"nome",value:a,onChange:this.escutadorDeInput})),o.a.createElement(k.a,{item:!0},o.a.createElement(S.a,{id:"livro",label:"Livro",variant:"outlined",name:"livro",value:n,onChange:this.escutadorDeInput})),o.a.createElement(k.a,{item:!0},o.a.createElement(S.a,{id:"preco",label:"Pre\xe7o",variant:"outlined",name:"preco",value:r,onChange:this.escutadorDeInput})),o.a.createElement(k.a,{item:!0},o.a.createElement(O.a,{variant:"contained",color:"primary",onClick:this.submitFormulario,type:"button"},"Salvar")))))}}]),t}(n.Component),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2?arguments[2]:void 0;return fetch("".concat("http://localhost:8000/api/autor").concat(e),{method:t,headers:{"content-type":"application/json"},body:a}).then(function(e){return R.TrataErros(e)}).then(function(e){return e.json()})},R={ListaAutores:function(){return Q()},CriaAutor:function(e){return Q("","POST",e)},ListaNomes:function(){return Q("/nome")},ListaLivros:function(){return Q("/livro")},RemoveAutor:function(e){return Q("/".concat(e),"DELETE")},TrataErros:function(e){if(!e.ok)throw Error(e.responseText);return e}},W=R,J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).removeAutor=function(e){var t=a.state.autores.filter(function(t){return t.id!==e});W.RemoveAutor(e).then(function(e){"deleted"===e.message&&(a.setState({autores:Object(i.a)(t)}),F.exibeMensagem("error","Autor removido com sucesso"))}).catch(function(e){return F.exibeMensagem("error","Erro na comunica\xe7\xe3o com a API ao tentar remover o autor")})},a.escutadorDeSubmit=function(e){W.CriaAutor(JSON.stringify(e)).then(function(e){"success"===e.message&&(a.setState({autores:[].concat(Object(i.a)(a.state.autores),[e.data])}),F.exibeMensagem("success","Autor adicionado com sucesso"))}).catch(function(e){return F.exibeMensagem("error","Erro na comunica\xe7\xe3o com a API ao tentar criar o autor")})},a.state={autores:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;W.ListaAutores().then(function(t){"success"===t.message&&e.setState({autores:[].concat(Object(i.a)(e.state.autores),Object(i.a)(t.data))})}).catch(function(e){return F.exibeMensagem("error","Erro na comunica\xe7\xe3o com a API ao tentar listar os autores")})}},{key:"render",value:function(){return o.a.createElement(n.Fragment,null,o.a.createElement(E,null),o.a.createElement("div",{className:"container mb-10"},o.a.createElement("h1",null,"Casa do C\xf3digo"),o.a.createElement(T,{escutadorDeSubmit:this.escutadorDeSubmit}),o.a.createElement(y,{campos:[{titulo:"Autores",dado:"nome"},{titulo:"Livros",dado:"livro"},{titulo:"Pre\xe7os",dado:"preco"}],dados:this.state.autores,removeDado:this.removeAutor})))}}]),t}(n.Component),V=a(216),B=a(215),G=a(214),H=Object(G.a)({titulo:{textAlign:"center",color:"blue"}}),$=function(){var e=H();return o.a.createElement(n.Fragment,null,o.a.createElement(E,null),o.a.createElement(B.a,{maxWidth:"sm"},o.a.createElement(V.a,{className:e.titulo,variant:"h1",component:"h2"},"Sobre"),o.a.createElement(V.a,{variant:"body1",component:"p"},"A casa do c\xf3digo desenvolve todo tipo de programa.")))},q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={livros:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;W.ListaLivros().then(function(t){"success"===t.message&&(F.exibeMensagem("success","Livros listados com sucesso"),e.setState({livros:[].concat(Object(i.a)(e.state.livros),Object(i.a)(t.data))}))}).catch(function(e){return F.exibeMensagem("error","Falha na comunica\xe7\xe3o com a API ao listar os livros")})}},{key:"render",value:function(){return o.a.createElement(n.Fragment,null,o.a.createElement(E,null),o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"P\xe1gina de Livros"),o.a.createElement(y,{dados:this.state.livros,campos:[{titulo:"Livros",dado:"livro"}]})))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={nomes:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;W.ListaNomes().then(function(t){"success"===t.message&&(F.exibeMensagem("success","Autores Listados com sucesso"),e.setState({nomes:[].concat(Object(i.a)(e.state.nomes),Object(i.a)(t.data))}))}).catch(function(e){return F.exibeMensagem("error","Falha na comunica\xe7\xe3o com a API ao listar os autores")})}},{key:"render",value:function(){return o.a.createElement(n.Fragment,null,o.a.createElement(E,null),o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"P\xe1gina de Autores"),o.a.createElement(y,{dados:this.state.nomes,campos:[{titulo:"Autores",dado:"nome"}]})))}}]),t}(n.Component),K=function(){return o.a.createElement(n.Fragment,null,o.a.createElement(E,null),o.a.createElement("h1",null,"P\xe1gina N\xe3o Encontrada"))},U=a(32);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(v.a,null,o.a.createElement(U.c,null,o.a.createElement(U.a,{path:"/",exact:!0,component:J}),o.a.createElement(U.a,{path:"/sobre",component:$}),o.a.createElement(U.a,{path:"/livros",component:q}),o.a.createElement(U.a,{path:"/autores",component:z}),o.a.createElement(U.a,{component:K}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},87:function(e,t,a){e.exports=a(163)},92:function(e,t,a){},94:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.81d277d4.chunk.js.map